<!--// noinspection JSUnresolvedVariable-->

<!--// noinspection JSDeprecatedSymbols-->
<!--&lt;!&ndash;suppress ALL &ndash;&gt;-->
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SQL Home Test</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <link rel="stylesheet" href="css/styles.css">
</head>

<body>
<div class="top-bar">
    <nav class="navbar navbar-light navbar-expand-md bg-dark" id="top-navbar">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center" href="#">
            </a>
            <button data-bs-toggle="collapse" class="navbar-toggler" data-bs-target="#navcol-3">
                <span class="visually-hidden">Toggle navigation</span>
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navcol-3">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <img src="images/avatar.png" alt="" width="32" height="32" class="rounded-circle">
                    </li>
                </ul>
                <ul class="navbar-nav mx-auto">
                    <li class="nav-item">
                        <a class="nav-link active" style="color: black; text-align: center;" href="#">Ayush Old Age
                            Care</a>
                    </li>
                </ul>
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="btn btn-primary" href="/auth/logout" style="color: white; text-decoration: none;">Logout</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
</div>
<div class="main-content">
    <% console.log(status) %>
    <% if ( status == "loggedIN"){ %>
        <% if ( user.email != 'admin@gmail.com') { %>
            <div class="main-content-top-bar">
                <h1 class="welcome-text"><strong>Welcome</strong>, <%= user.name %></h1>
                <div class="right-side-info">
                    <div class="upcoming-events-btn">
                        <a href="/events" class="btn btn-primary">Upcoming Events</a>
                    </div>
                    <div class="date-medstock-info" style="white-space: nowrap;">
                        <div class="date-view">
                            <span>Today's Date:</span>
                            <p class="todays-date"></p>
                        </div>
                        <div class="med-stock-view">
                            <span>Medication Stock:</span><strong>
                                <% if (noPills <= 20) { %>
                                    <p class="med-stock-text" style="color: red;">LOW</p>
                                <% } else if (noPills > 20 && noPills <= 100) { %>
                                    <p class="med-stock-text" style="color: orange;">MED</p>
                                <% } else { %>
                                    <p class="med-stock-text" style="color: green;">OK</p>
                                <% } %>
                            </strong>
                        </div>
                    </div>
                    <div style="clear:both;"></div>
                </div>
            </div>
            <div class="container text-center">
                <div class="row">
                    <div class="col-2">
                        <div class="card">
                            <div class="card-body">
                                <strong>Today's Agenda:</strong>
                                <p class="card-text">John Doe -> Crocin</p>
<!--                                <p class="card-text">Jane Doe -> Ibuprofen</p>-->
<!--                                <p class="card-text">Jackson DeVries -> Paracetemol</p>-->
                            </div>
                        </div>
                    </div>
                    <div class="col-5">
                        <div class="card">
                            <a href="/patient" class="card-anchor">
                                <div class="card-body">
                                    <div class="patient-card">
                                        <div class="patient-card-info">
                                            <h5 class="card-title" style="text-align: left">Patient Log</h5>
                                            <div class="sub-patient-info">
                                                <div class="patient-view">
                                                    <div class="patients-text">
                                                        <p class="card-text" style="text-align: left">Patients:</p>
                                                    </div>
                                                    <div class="live-patient-view">
                                                        <p class="card-text" style="text-align: center">
                                                            <strong><%= noPatients %></strong></p>
                                                    </div>
                                                </div>
                                                <div class="high-alert-view">
                                                    <div class="high-alert-text">
                                                        <p class="card-text" style="text-align: left">On High Alert:</p>
                                                    </div>
                                                    <div class="live-high-alert-view">
                                                        <p class="card-text" style="text-align: center">
                                                            <strong><%= noHighAlert %></strong></p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="patient-card-pic">
                                            <img src="images/patient.png" alt="" width="100%" height="100%">
                                        </div>
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
                    <div class="col-5">
                        <div class="card">
                            <a href="/pill" class="card-anchor">
                                <div class="card-body">
                                    <div class="patient-card">
                                        <div class="patient-card-info">
                                            <h5 class="card-title" style="text-align: left">Pill Inventory</h5>
                                            <div class="sub-patient-info">
                                                <div class="patient-view">
                                                    <div class="patients-text">
                                                        <p class="card-text" style="text-align: left">Stock:</p>
                                                    </div>
                                                    <div class="live-patient-view">
                                                        <p class="card-text" style="text-align: center">
                                                            <strong><%= noPills %></strong></p>
                                                    </div>
                                                </div>
                                                <div class="high-alert-view">
                                                    <div class="high-alert-text">
                                                        <p class="card-text" style="text-align: left">Pills
                                                            Assigned:</p>
                                                    </div>
                                                    <div class="live-high-alert-view">
                                                        <p class="card-text" style="text-align: center">
                                                            <strong><%= noPillsAssigned %></strong></p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="patient-card-pic">
                                            <img src="images/pill-img.jpg" alt="" width="100%" height="100%">
                                        </div>
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="patient-row">
                <div class="row">
                    <div class="col-6">
                        <div class="card">
                            <div class="card-header text-center">
                                General Hospital Announcements
                            </div>
                            <div class="card-body">
                                <ul class="list-group list-group-flush">
                                    <% posts.forEach(post => { %>
                                        <h5 class="card-title text-center announcements-title"><%= post.announce_title %></h5>
                                        <li class="list-group-item"><%= post.announce_body %></li>
                                    <% }) %>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="card">
                            <div class="card-header text-center">
                                Administrator Announcements
                            </div>
                            <div class="card-body">
                                <ul class="list-group list-group-flush">
                                    <% adminPosts.forEach(post => { %>
                                        <h5 class="card-title text-center announcements-title"><%= post.announce_title %></h5>
                                        <li class="list-group-item"><%= post.announce_body %></li>
                                    <% }) %>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        <% } else { %>
            <div class="container my-5">
                <div class="card text-center" style="width: 100%">
                    <div class="card-body">
                        <h5 class="card-title">Welcome to NurseMedCall! <%= user.name %></h5>
                        <h6 class="card-subtitle mb-2 text-muted">This is the Admin Portal</h6>
                        <h6 class="card-subtitle mb-2 text-muted last-login-text"></h6>
                        <p class="card-text">Use this to add announcemnets and new users to use the system</p>
                    </div>
                </div>
            </div>
            <div class="announcements-row">
                <div class="row">
                    <div class="col-6">
                        <div class="card">
                            <div class="card-header text-center">
                                General Hospital Announcements
                            </div>
                            <div class="card-body">
                                <ul class="list-group list-group-flush">
                                    <% posts.forEach(post => { %>
                                        <h5 class="card-title text-center announcements-title"><%= post.announce_title %></h5>
                                        <li class="list-group-item"><%= post.announce_body %>
                                            <div class="d-grid gap-2 d-md-block">
                                                <div class="text-center">
                                                    <button type="button" class="btn btn-primary admin-edit-button"
                                                            data-bs-toggle="modal"
                                                            data-bs-target="#editModal"
                                                            data-bs-postId="<%= post._id %>"
                                                            data-bs-postTitle="<%= post.announce_title %>"
                                                            data-bs-postBody="<%= post.announce_body %>"
                                                            data-bs-postType="general">
                                                        Edit
                                                    </button>
                                                    <div class="modal fade" id="editModal" tabindex="-1">
                                                        <div class="modal-dialog modal-dialog-centered">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <h1 class="modal-title fs-5" id="exampleModalLabel">
                                                                        Edit Announcement</h1>
                                                                    <button type="button" class="btn-close"
                                                                            data-bs-dismiss="modal"
                                                                            aria-label="Close"></button>
                                                                </div>
                                                                <form action="/update/post" method="POST"
                                                                      class="form-addpatient">
                                                                    <div class="modal-body">
                                                                        <div class="form-floating">
                                                                            <input type="text" class="form-control top"
                                                                                   placeholder="Name"
                                                                                   name="post_title" id="post_title"
                                                                                   autocomplete="off"
                                                                                   required autofocus>
                                                                            <label for="post_title">Post Title</label>
                                                                        </div>
                                                                        <div class="form-floating">
                                                                            <textarea class="form-control middle"
                                                                                      name="post_body" id="post_body"
                                                                                      style="height: 5rem"></textarea>
                                                                            <label for="family">Post Content</label>
                                                                        </div>
                                                                        <div class="form-floating">
                                                                            <select class="form-select middle"
                                                                                    name="post_type"
                                                                                    id="post_type">
                                                                                <option selected id="selected_selection"
                                                                                        value="">
                                                                                </option>
                                                                                <option value=""
                                                                                        id="second_selection">
                                                                                </option>
                                                                            </select>
                                                                            <label for="post_type">Post Type:</label>
                                                                        </div>
                                                                        <div class="form-floating">
                                                                            <input type="text"
                                                                                   class="form-control bottom"
                                                                                   placeholder="ID"
                                                                                   name="post_id" id="post_id"
                                                                                   autocomplete="off"
                                                                                   readonly>
                                                                            <label for="post_id">Post ID:</label>
                                                                        </div>
                                                                    </div>
                                                                    <div class="modal-footer">
                                                                        <button type="button" class="btn btn-secondary"
                                                                                data-bs-dismiss="modal">
                                                                            Cancel
                                                                        </button>
                                                                        <button type="submit" class="btn btn-primary">
                                                                            Update Post
                                                                        </button>
                                                                    </div>
                                                                </form>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <button type="button" class="btn btn-danger admin-edit-button"
                                                            id="post-delete-button"
                                                            data-bs-toggle="modal"
                                                            data-bs-target="#deleteModal"
                                                            data-bs-type="general"
                                                            data-bs-postID="<%= post._id %>">
                                                        Delete
                                                    </button>
                                                    <div class="modal fade" id="deleteModal" tabindex="-1">
                                                        <div class="modal-dialog modal-dialog-centered">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <h1 class="modal-title fs-5" id="exampleModalLabel">
                                                                        Delete Post</h1>
                                                                    <button type="button" class="btn-close"
                                                                            data-bs-dismiss="modal"
                                                                            aria-label="Close"></button>
                                                                </div>
                                                                <form action="/update/postDelete" method="POST"
                                                                      id="delete-form">
                                                                    <div class="modal-body">
                                                                        <input type="hidden" name="deleteType"
                                                                               id="toDeleteType">
                                                                        <input type="hidden" name="deleteID"
                                                                               id="toDeleteID">
                                                                    </div>
                                                                    <p>Are you sure you want to delete this post?</p>
                                                                    <div class="modal-footer">
                                                                        <button type="button" class="btn btn-secondary"
                                                                                data-bs-dismiss="modal">
                                                                            Cancel
                                                                        </button>
                                                                        <button type="submit" class="btn btn-primary">
                                                                            Delete Post
                                                                        </button>
                                                                    </div>
                                                                </form>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </li>
                                    <% }) %>
                                </ul>
                            </div>
                        </div>
                        <div class="modal fade" id="addModal" tabindex="-1">
                            <div class="modal-dialog modal-dialog-centered">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h1 class="modal-title fs-5" id="exampleModalLabel">Add New Announcement</h1>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal"
                                                aria-label="Close"></button>
                                    </div>
                                    <form action="/addpost" method="POST" class="form-addpatient">
                                        <div class="modal-body">
                                            <div class="form-floating">
                                                <input type="text" class="form-control top" placeholder="Name"
                                                       name="post_title" id="post_title" autocomplete="off"
                                                       required autofocus>
                                                <label for="post_title">Post Title</label>
                                            </div>
                                            <div class="form-floating">
                                                    <textarea class="form-control middle"
                                                              name="post_body" id="post_body"
                                                              style="height: 5rem"></textarea>
                                                <label for="family">Post Content</label>
                                            </div>
                                            <div class="form-floating">
                                                <select class="form-select bottom" name="post_type"
                                                        id="post_type">
                                                    <option selected id="" value="general">General
                                                        Announcement
                                                    </option>
                                                    <option value="admin" id="">Admin Announcement
                                                    </option>
                                                </select>
                                                <label for="post_type">Post Type:</label>
                                            </div>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                                                Cancel
                                            </button>
                                            <button type="submit" class="btn btn-primary">+ Create New Post</button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="card">
                            <div class="card-header text-center">
                                Administrator Announcements
                            </div>
                            <div class="card-body">
                                <ul class="list-group list-group-flush">
                                    <% adminPosts.forEach(post => { %>
                                        <h5 class="card-title text-center announcements-title"><%= post.announce_title %></h5>
                                        <li class="list-group-item"><%= post.announce_body %>
                                            <div class="d-grid gap-2 d-md-block">
                                                <div class="text-center">
                                                    <button type="button" class="btn btn-primary admin-edit-button"
                                                            data-bs-toggle="modal"
                                                            data-bs-target="#editModal"
                                                            data-bs-postId="<%= post._id %>"
                                                            data-bs-postTitle="<%= post.announce_title %>"
                                                            data-bs-postBody="<%= post.announce_body %>"
                                                            data-bs-postType="admin">
                                                        Edit
                                                    </button>
                                                    <div class="modal fade" id="editModal" tabindex="-1">
                                                        <div class="modal-dialog modal-dialog-centered">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <h1 class="modal-title fs-5" id="exampleModalLabel">
                                                                        Edit Announcement</h1>
                                                                    <button type="button" class="btn-close"
                                                                            data-bs-dismiss="modal"
                                                                            aria-label="Close"></button>
                                                                </div>
                                                                <form action="/update/post" method="POST"
                                                                      class="form-addpatient">
                                                                    <div class="modal-body">
                                                                        <div class="form-floating">
                                                                            <input type="text" class="form-control top"
                                                                                   placeholder="Name"
                                                                                   name="post_title" id="post_title"
                                                                                   autocomplete="off"
                                                                                   required autofocus>
                                                                            <label for="post_title">Post Title</label>
                                                                        </div>
                                                                        <div class="form-floating">
                                                                            <textarea class="form-control middle"
                                                                                      name="post_body" id="post_body"
                                                                                      style="height: 5rem"></textarea>
                                                                            <label for="family">Post Content</label>
                                                                        </div>
                                                                        <div class="form-floating">
                                                                            <select class="form-select middle"
                                                                                    name="post_type"
                                                                                    id="post_type">
                                                                                <option selected id="selected_selection"
                                                                                        value="">
                                                                                </option>
                                                                                <option value=""
                                                                                        id="second_selection">
                                                                                </option>
                                                                            </select>
                                                                            <label for="post_type">Post Type:</label>
                                                                        </div>
                                                                        <div class="form-floating">
                                                                            <input type="text"
                                                                                   class="form-control bottom"
                                                                                   placeholder="ID"
                                                                                   name="post_id" id="post_id"
                                                                                   autocomplete="off"
                                                                                   readonly>
                                                                            <label for="post_id">Post ID:</label>
                                                                        </div>
                                                                    </div>
                                                                    <div class="modal-footer">
                                                                        <button type="button" class="btn btn-secondary"
                                                                                data-bs-dismiss="modal">
                                                                            Cancel
                                                                        </button>
                                                                        <button type="submit" class="btn btn-primary">
                                                                            Update Post
                                                                        </button>
                                                                    </div>
                                                                </form>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <button type="button" class="btn btn-danger admin-edit-button"
                                                            id="post-delete-button"
                                                            data-bs-toggle="modal"
                                                            data-bs-target="#deleteModal"
                                                            data-bs-type="admin"
                                                            data-bs-postID="<%= post._id %>">
                                                        Delete
                                                    </button>
                                                    <div class="modal fade" id="deleteModal" tabindex="-1">
                                                        <div class="modal-dialog modal-dialog-centered">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <h1 class="modal-title fs-5" id="exampleModalLabel">
                                                                        Delete Post</h1>
                                                                    <button type="button" class="btn-close"
                                                                            data-bs-dismiss="modal"
                                                                            aria-label="Close"></button>
                                                                </div>
                                                                <form action="/update/postDelete" method="POST"
                                                                      id="delete-form">
                                                                    <div class="modal-body">
                                                                        <input type="hidden" name="deleteType"
                                                                               id="toDeleteType">
                                                                        <input type="hidden" name="deleteID"
                                                                               id="toDeleteID">
                                                                    </div>
                                                                    <p>Are you sure you want to delete this post?</p>
                                                                    <div class="modal-footer">
                                                                        <button type="button" class="btn btn-secondary"
                                                                                data-bs-dismiss="modal">
                                                                            Cancel
                                                                        </button>
                                                                        //TODO: Fix Delete Functionality
                                                                        <button type="submit" class="btn btn-primary">
                                                                            Delete Post
                                                                        </button>
                                                                    </div>
                                                                </form>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </li>
                                    <% }) %>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="text-center">
                        <button type="button" class="btn btn-primary admin-add-button dynamic-button"
                                data-bs-toggle="modal"
                                data-bs-target="#addModal">
                            + Add Announcement
                        </button>
                        <br>
                        <a href="/register">
                            <button type="button" class="btn btn-primary admin-add-button dynamic-button">
                                + Add New Nurse
                            </button>
                        </a>
                    </div>
                    <form action="/update/deleteUser" method="POST">
                        <div class="announcements-row">
                            <div class="row">
                                <div class="col-6">
                                    <div class="card">
                                        <div class="card-header text-center">
                                            Current Registered Nurses
                                        </div>
                                        <div class="card-body">
                                            <div class="form-floating">
                                                <select name="userSelected" id="userSelected"
                                                        class="form-select middle patient-select"
                                                        style="height: 12rem !important;" multiple>
                                                    <% users.forEach(function(sqlUser) { %>
                                                        <option value="<%= sqlUser.id %>"><%= sqlUser.name %>
                                                            (<%= sqlUser.email %>)
                                                        </option>
                                                    <% }); %>
                                                </select>
                                                <label for="assigned_patients"></label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div class="card">
                                        <div class="card-header text-center">
                                            User Control
                                        </div>
                                        <div class="card-body">
                                            <div class="text-center">
                                                <button type="submit" class="btn btn-danger admin-edit-button"
                                                        id="user-delete-button">
                                                    Delete Selected Users
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        <% } %>
    <% } else { %>
        <div class="container my-5">
            <div class="card text-center text-bg-danger" style="width: 100%">
                <div class="card-body">
                    <h5 class="card-title">Welcome to NurseMedCall!</h5>
                    <h6 class="card-subtitle mb-2 text-muted">There is no user currently logged in</h6>
                    <p class="card-text">Use the button below to proceed</p>
                    <a class="btn btn-warning btn-lg" href="/login"
                       style="color: white; text-decoration: none;">Login</a>
                </div>
            </div>
        </div>
    <% } %>
</div>
<div class="d-flex flex-column flex-shrink-0 p-3 bg-light sidebar bg-dark" id="side-navbar">
    <% if ( status == "loggedIN"){ %>
        <div class="avatar-ctn" style="text-align: center; padding: 1%">
            <img src="images/avatar.png" class="avatar"
                 style="width: 65%;"
                 alt="user profile picture">
        </div>
    <a href="#" class="d-flex align-items-center link-dark text-decoration-none dropdown-toggle" id="dropdownUser1"
       data-bs-toggle="dropdown" aria-expanded="false">
        <strong><%= user.name %></strong>
        <% } else { %>
        <% } %>
    </a>
    <ul class="dropdown-menu text-small shadow" aria-labelledby="dropdownUser2">
        <li><a class="dropdown-item" href="/profile">Profile</a></li>
        <li>
            <hr class="dropdown-divider">
        </li>
        <li><a class="dropdown-item" href="/auth/logout">Logout</a></li>
    </ul>
    <a href="/" class="d-flex align-items-center mb-3 mb-md-0 me-md-auto link-dark text-decoration-none">
        <div class="map-image">
            <img src="images/home map.png" alt="home map" width="150" height="100" id="map_image">
        </div>
        <% if ( status != 'loggedIN') { %>
            <span class="fs-4">No User</span><br>
        <% } else { %>
            <% if (user.email == 'admin@gmail.com') { %>
                <span class="fs-4">Admin Portal</span><br>
            <% } else { %>
                <span class="fs-4">Nurse Portal</span><br>
            <% } %>
        <% } %>
    </a>
    <hr>
    <ul class="nav nav-pills flex-column mb-auto">
        <% if (status == "loggedIN"){ %>
            <li class="nav-item">
                <a href="#" class="nav-link active" aria-current="page">
                    <svg class="bi me-2" width="16" height="16">
                        <use xlink:href="#home"></use>
                    </svg>
                    Home
                </a>
            </li>
        <% } else { %>
        <% } %>
    </ul>
</div>
<script>
    const today = new Date();
    const dd = String(today.getDate()).padStart(2, '0');
    const mm = String(today.getMonth() + 1).padStart(2, '0');
    const yyyy = today.getFullYear();
    const todaysDate = `${dd}/${mm}/${yyyy}`;
    document.querySelector('.todays-date').textContent = todaysDate;

    const medStockText = document.querySelector('.med-stock-text');

    if (medStockText.textContent === 'LOW') {
        function blink() {
            medStockText.style.visibility = medStockText.style.visibility === 'hidden' ? 'visible' : 'hidden';
        }

        setInterval(blink, 500);
    }
</script>
<script>
    const now = new Date();

    const suffixes = {
        1: "st",
        2: "nd",
        3: "rd",
        21: "st",
        22: "nd",
        23: "rd",
        31: "st",
    };

    const day = now.toLocaleString("en-US", {weekday: "long"});
    const month = now.toLocaleString("en-US", {month: "long"});
    const year = now.getFullYear();
    const date = now.getDate();
    const ordinal = suffixes[date] || "th";
    const dateString = `${day}, ${date}${ordinal} ${month} ${year}`;

    const hours = now.getHours() % 12 || 12;
    const minutes = now.getMinutes().toString().padStart(2, "0");
    const seconds = now.getSeconds().toString().padStart(2, "0");
    const meridiem = now.getHours() < 12 ? "AM" : "PM";
    const timeString = `${hours}:${minutes}:${seconds} ${meridiem}`;

    const lastLogin = `Admin last login: ${dateString}, ${timeString}`;

    const lastLoginText = document.querySelector(".last-login-text");
    lastLoginText.textContent = lastLogin;

</script>
<script>

    const message = decodeURIComponent(document.cookie.split("message=")[1]);

    // noinspection EqualityComparisonWithCoercionJS
    if (message == undefined || message == "undefined" || message == "null" || message == null) {
    } else {
        const dynamicButton = document.querySelector(".dynamic-button");
        if (dynamicButton) {
            dynamicButton.textContent = `${message}`;
            document.cookie = "message=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
        }
    }

    const editModal = document.getElementById('editModal');
    const deleteModal = document.getElementById('deleteModal');
    deleteModal.addEventListener('show.bs.modal', event => {
        const button = event.relatedTarget;
        const _id = button.getAttribute('data-bs-postID');
        const type = button.getAttribute('data-bs-type');
        const modalPostType = deleteModal.querySelector('.modal-body #toDeleteType');
        const modalPostId = deleteModal.querySelector('.modal-body #toDeleteID');
        modalPostId.value = _id;
        modalPostType.value = type;
    });
    editModal.addEventListener('show.bs.modal', event => {
        const button = event.relatedTarget;
        const title = button.getAttribute('data-bs-postTitle');
        const body = button.getAttribute('data-bs-postBody');
        const type = button.getAttribute('data-bs-postType');
        const _id = button.getAttribute('data-bs-postId');
        const modalTitle = editModal.querySelector('.modal-title');
        const modalPostTitle = editModal.querySelector('.modal-body #post_title');
        const modalPostBody = editModal.querySelector('.modal-body #post_body');
        const modalPostType = editModal.querySelector('.modal-body #post_type');
        const modalPostId = editModal.querySelector('.modal-body #post_id');
        const modalPost_select = editModal.querySelector('.modal-body #selected_selection');
        const modalPost_select2 = editModal.querySelector('.modal-body #second_selection');

        if (type == 'general') {
            modalPost_select.textContent = 'General Announcement';
            modalPostType.options[0].value = 'general';
            modalPost_select2.textContent = 'Admin Announcement';
            modalPostType.options[1].value = 'admin';
        } else {
            modalPost_select.textContent = 'Admin Announcement';
            modalPostType.options[0].value = 'admin';
            modalPost_select2.textContent = 'General Announcement';
            modalPostType.options[1].value = 'general';
        }

        modalTitle.textContent = `Edit Announcement: ${title}`;
        modalPostTitle.value = title;
        modalPostBody.value = body;
        modalPostId.value = _id;

        const deletePostInput = document.getElementById('toDeletePost');
        const deletePostType = document.getElementById('toDeleteType');
        deletePostType.value = type;
        deletePostInput.value = _id;
    })
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>